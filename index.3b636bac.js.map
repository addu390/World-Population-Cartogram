{"mappings":"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","sources":["node_modules/d3-hexbin/src/hexbin.js","app.js"],"sourcesContent":["var thirdPi = Math.PI / 3,\n    angles = [0, thirdPi, 2 * thirdPi, 3 * thirdPi, 4 * thirdPi, 5 * thirdPi];\n\nfunction pointX(d) {\n  return d[0];\n}\n\nfunction pointY(d) {\n  return d[1];\n}\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1,\n      x = pointX,\n      y = pointY,\n      r,\n      dx,\n      dy;\n\n  function hexbin(points) {\n    var binsById = {}, bins = [], i, n = points.length;\n\n    for (i = 0; i < n; ++i) {\n      if (isNaN(px = +x.call(null, point = points[i], i, points))\n          || isNaN(py = +y.call(null, point, i, points))) continue;\n\n      var point,\n          px,\n          py,\n          pj = Math.round(py = py / dy),\n          pi = Math.round(px = px / dx - (pj & 1) / 2),\n          py1 = py - pj;\n\n      if (Math.abs(py1) * 3 > 1) {\n        var px1 = px - pi,\n            pi2 = pi + (px < pi ? -1 : 1) / 2,\n            pj2 = pj + (py < pj ? -1 : 1),\n            px2 = px - pi2,\n            py2 = py - pj2;\n        if (px1 * px1 + py1 * py1 > px2 * px2 + py2 * py2) pi = pi2 + (pj & 1 ? 1 : -1) / 2, pj = pj2;\n      }\n\n      var id = pi + \"-\" + pj, bin = binsById[id];\n      if (bin) bin.push(point);\n      else {\n        bins.push(bin = binsById[id] = [point]);\n        bin.x = (pi + (pj & 1) / 2) * dx;\n        bin.y = pj * dy;\n      }\n    }\n\n    return bins;\n  }\n\n  function hexagon(radius) {\n    var x0 = 0, y0 = 0;\n    return angles.map(function(angle) {\n      var x1 = Math.sin(angle) * radius,\n          y1 = -Math.cos(angle) * radius,\n          dx = x1 - x0,\n          dy = y1 - y0;\n      x0 = x1, y0 = y1;\n      return [dx, dy];\n    });\n  }\n\n  hexbin.hexagon = function(radius) {\n    return \"m\" + hexagon(radius == null ? r : +radius).join(\"l\") + \"z\";\n  };\n\n  hexbin.centers = function() {\n    var centers = [],\n        j = Math.round(y0 / dy),\n        i = Math.round(x0 / dx);\n    for (var y = j * dy; y < y1 + r; y += dy, ++j) {\n      for (var x = i * dx + (j & 1) * dx / 2; x < x1 + dx / 2; x += dx) {\n        centers.push([x, y]);\n      }\n    }\n    return centers;\n  };\n\n  hexbin.mesh = function() {\n    var fragment = hexagon(r).slice(0, 4).join(\"l\");\n    return hexbin.centers().map(function(p) { return \"M\" + p + \"m\" + fragment; }).join(\"\");\n  };\n\n  hexbin.x = function(_) {\n    return arguments.length ? (x = _, hexbin) : x;\n  };\n\n  hexbin.y = function(_) {\n    return arguments.length ? (y = _, hexbin) : y;\n  };\n\n  hexbin.radius = function(_) {\n    return arguments.length ? (r = +_, dx = r * 2 * Math.sin(thirdPi), dy = r * 1.5, hexbin) : r;\n  };\n\n  hexbin.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], hexbin) : [x1 - x0, y1 - y0];\n  };\n\n  hexbin.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], hexbin) : [[x0, y0], [x1, y1]];\n  };\n\n  return hexbin.radius(1);\n}\n","import { hexbin } from 'd3-hexbin'\nimport * as topojson from \"topojson-client\";\n\ndocument.querySelector('#loader').classList.add(\"hide\");\nlet colors = ['#1abc9c', '#2ecc71', '#3498db', '#9b59b6', '#34495e', '#16a085', '#27ae60', '#2980b9', '#8e44ad', '#2c3e50',\n  '#f1c40f', '#e67e22', '#e74c3c', '#ecf0f1', '#95a5a6', '#f39c12', '#d35400', '#c0392b', '#bdc3c7', '#7f8c8d']\n\nlet radiusInput = document.querySelector('input#radius');\n\nradiusInput.addEventListener('click', () => {\n  document.querySelector('#loader').classList.remove(\"hide\");\n  startGeo()\n});\n\nconst margin = { top: 25, right: 10, bottom: 35, left: 10 };\nconst width = 1250 - margin.left - margin.right;\nconst height = 750 - margin.top - margin.bottom;\nconst strokeWidth = 0.5\n\nfunction startTopo() {\n  let hexRadius = radiusInput.value\n  const topoData = d3.json(\n    'https://raw.githubusercontent.com/addu390/population-cartogram/master/data/test/topo.json'\n  );\n  Promise.all([topoData]).then(res => {\n    let [topoData] = res;\n\n    var geoData = topojson.feature(topoData, topoData.objects.tiles)\n\n    plot_map(geoData, hexRadius, true);\n    document.querySelector('#loader').classList.add(\"hide\");\n  });\n}\n\nfunction startGeo() {\n  let hexRadius = radiusInput.value\n  const geoData = d3.json(\n    'https://raw.githubusercontent.com/addu390/population-cartogram/master/data/population/2018/geo.json'\n  );\n  Promise.all([geoData]).then(res => {\n    let [geoData] = res;\n\n    plot_map(geoData, hexRadius, false);\n    document.querySelector('#loader').classList.add(\"hide\");\n  });\n}\n\nfunction plot_map(geo, hexRadius, isProjected) {\n  let hexDistance = hexRadius * 1.5\n  let cols = width / hexDistance\n  let newProjection = d3.geoNaturalEarth1().fitExtent([[0, height * 0.05], [width, height * 0.95]], geo)\n  let rows = Math.ceil(height / hexDistance);\n  let pointGrid = d3.range(rows * cols).map(function (el, i) {\n    return {\n      x: Math.floor(i % cols) * hexDistance,\n      y: Math.floor(i / cols) * hexDistance,\n      datapoint: 0\n    };\n  });\n\n  let features = []\n  for (let i = 0; i < geo.features.length; i++) {\n    var tempFeatures = []\n    if (geo.features[i].geometry.type == \"MultiPolygon\") {\n      for (let j = 0; j < geo.features[i].geometry.coordinates.length; j++) {\n        tempFeatures = tempFeatures.concat(geo.features[i].geometry.coordinates[j][0])\n      }\n    }\n    else if (geo.features[i].geometry.type == \"Polygon\") {\n      tempFeatures = tempFeatures.concat(geo.features[i].geometry.coordinates[0])\n    }\n    features[i] = {\n      \"coordinates\": tempFeatures,\n      \"properties\": geo.features[i].properties\n    }\n  }\n\n  d3.select('#container').selectAll(\"*\").remove()\n\n  let newHexbin = hexbin()\n    .radius(hexRadius)\n    .x(function (d) { return d.x; })\n    .y(function (d) { return d.y; })\n\n  const svg = d3.select('#container')\n    .append('svg')\n    .attr('width', width + margin.left + margin.top)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left} ${margin.top})`);\n\n  svg.append('g').attr('id', 'hexes')\n    .selectAll('.hex')\n    .data(newHexbin(pointGrid))\n    .enter().append('path')\n    .attr('class', 'hex')\n    .attr('transform', function (d) { return 'translate(' + d.x + ', ' + d.y + ')'; })\n    .attr('d', newHexbin.hexagon())\n    .style('fill', '#fff')\n    .style('stroke', '#e0e0e0')\n    .style('stroke-width', strokeWidth)\n    .on(\"click\", mclickBase);\n\n  for (let i = 0; i < features.length; i++) {\n    var polygonPoints;\n    if (isProjected) {\n      polygonPoints = features[i].coordinates;\n    } else {\n      polygonPoints = features[i].coordinates.map(el => newProjection(el));\n    }\n\n    let usPoints = pointGrid.reduce(function (arr, el) {\n      if (d3.polygonContains(polygonPoints, [el.x, el.y])) arr.push(el);\n      return arr;\n    }, [])\n\n    let hexPoints = newHexbin(usPoints)\n\n    svg.append('g')\n      .attr('id', 'hexes')\n      .selectAll('.hex')\n      .data(hexPoints)\n      .enter().append('path')\n      .attr('class', 'hex' + features[i].properties.id)\n      .attr('transform', function (d) { return 'translate(' + d.x + ', ' + d.y + ')'; })\n      .attr(\"x\", function (d) { return d.x; })\n      .attr(\"y\", function (d) { return d.y; })\n      .attr('d', newHexbin.hexagon())\n      .style('fill', colors[i % 19])\n      .style('stroke', '#000')\n      .style('stroke-width', strokeWidth)\n      .on(\"click\", mclick)\n      .on(\"mouseover\", mover)\n      .on(\"mouseout\", mout)\n      .call(d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended));\n  }\n}\n\nfunction mover(d) {\n  klass = d3.select(this).attr(\"class\")\n  d3.selectAll(\".\" + klass);\n  d3.select(this)\n    .transition()\n    .duration(10)\n    .style(\"fill-opacity\", 0.9);\n}\n\nfunction mclickBase(d) {\n  let selectElement = document.querySelector('#label-option');\n  if (selectElement.value == \"Remove\") {\n    d3.select(this)\n      .style('fill', '#fff')\n      .style('stroke', '#e0e0e0')\n      .style('stroke-width', strokeWidth)\n      .lower();\n  } else {\n    let colorElement = document.querySelector('#color-option');\n    d3.select(this)\n      .style('stroke-width', strokeWidth)\n      .style('fill', colorElement.value)\n      .style('stroke', '#000')\n      .on(\"mouseover\", mover)\n      .on(\"mouseout\", mout)\n      .call(d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended))\n      .raise();\n  }\n}\n\nfunction mclick(d) {\n  let selectElement = document.querySelector('#label-option');\n  if (selectElement.value == \"Remove\") {\n    d3.select(this)\n      .remove()\n  } else {\n    let colorElement = document.querySelector('#color-option');\n    d3.select(this)\n      .style('stroke-width', strokeWidth)\n      .style('fill', colorElement.value)\n      .style('stroke', '#000')\n      .on(\"mouseover\", mover)\n      .on(\"mouseout\", mout)\n      .call(d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended))\n      .raise();\n  }\n}\n\nfunction mout(d) {\n  d3.select(this)\n    .transition()\n    .duration(10)\n    .style(\"fill-opacity\", 1);\n}\n\nfunction dragstarted(event, d) {\n  d.fixed = false\n  d3.select(this).raise()\n    .style('stroke-width', 1)\n    .style('stroke', '#000');\n}\n\nfunction dragged(event, d) {\n  let hexRadius = radiusInput.value\n  var x = event.x\n  var y = event.y\n  var grids = round(x, y, hexRadius);\n  d3.select(this)\n    .attr(\"x\", d.x = grids[0])\n    .attr(\"y\", d.y = grids[1])\n    .attr('transform', function (d) { return 'translate(' + d.x + ', ' + d.y + ')'; })\n}\n\nfunction dragended(event, d) {\n  d.fixed = true\n  d3.select(this)\n    .style('stroke-width', strokeWidth)\n    .style('stroke', '#000');\n}\n\nfunction round(x, y, n) {\n  var gridx\n  var gridy\n  var factor = Math.sqrt(3) / 2\n  var d = n * 2\n  var sx = d * factor\n  var sy = n * 3\n  if (y % sy < n) {\n    gridy = y - (y % sy)\n    gridx = x - (x % sx)\n  } else {\n    gridy = y + (d - (n * factor) / 2) - (y % sy);\n    gridx = x + (n * factor) - (x % sx);\n  }\n  return [gridx, gridy]\n}\n\nstartGeo()"],"names":["$28bd4c13f05a9ff5$var$thirdPi","Math","PI","$28bd4c13f05a9ff5$var$angles","$28bd4c13f05a9ff5$var$pointX","d","$28bd4c13f05a9ff5$var$pointY","document","querySelector","classList","add","$6b17f08f738443dc$var$colors","$6b17f08f738443dc$var$radiusInput","addEventListener","remove","$6b17f08f738443dc$var$startGeo","$6b17f08f738443dc$var$margin","$6b17f08f738443dc$var$width","$6b17f08f738443dc$var$height","hexRadius","value","geoData1","d3","json","Promise","all","then","res","geoData","$6b17f08f738443dc$var$plot_map","geo","isProjected","hexDistance","cols","newProjection","geoNaturalEarth1","fitExtent","rows","ceil","pointGrid","range","map","el","i","x","floor","y","datapoint","features","i2","length","tempFeatures","geometry","type","j","coordinates","concat","properties","select","selectAll","newHexbin","r","dx1","dy1","x01","y01","x11","y11","x2","y2","hexbin","points","binsById","bins","n","isNaN","px","call","point","py","pj","round","pi","py1","abs","px1","pi2","pj2","px2","py2","id","bin","push","hexagon","radius","x0","y0","angle","x1","sin","y1","cos","dx","dy","join","centers","mesh","fragment","slice","p","_","arguments","size","extent","$28bd4c13f05a9ff5$export$2e2bcd8739ae039","svg","append","attr","data","enter","style","on","$6b17f08f738443dc$var$mclickBase","i1","polygonPoints","hexPoints","reduce","arr","polygonContains","$6b17f08f738443dc$var$mclick","$6b17f08f738443dc$var$mover","$6b17f08f738443dc$var$mout","drag","$6b17f08f738443dc$var$dragstarted","$6b17f08f738443dc$var$dragged","$6b17f08f738443dc$var$dragended","klass","this","transition","duration","lower","colorElement","raise","event","fixed","d1","grids","gridx","gridy","factor","sqrt","sx","sy","$6b17f08f738443dc$var$round"],"version":3,"file":"index.3b636bac.js.map"}