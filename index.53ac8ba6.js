var t=Math.PI/3,e=[0,t,2*t,3*t,4*t,5*t];function n(t){return t[0]}function r(t){return t[1]}function o(){var o,a,u,l=0,i=0,s=1,c=1,f=n,h=r;function d(t){var e,n={},r=[],o=t.length;for(e=0;e<o;++e)if(!isNaN(i=+f.call(null,l=t[e],e,t))&&!isNaN(s=+h.call(null,l,e,t))){var l,i,s,c=Math.round(s/=u),d=Math.round(i=i/a-(1&c)/2),g=s-c;if(3*Math.abs(g)>1){var p=i-d,m=d+(i<d?-1:1)/2,y=c+(s<c?-1:1),v=i-m,M=s-y;p*p+g*g>v*v+M*M&&(d=m+(1&c?1:-1)/2,c=y)}var x=d+"-"+c,b=n[x];b?b.push(l):(r.push(b=n[x]=[l]),b.x=(d+(1&c)/2)*a,b.y=c*u)}return r}function g(t){var n=0,r=0;return e.map((function(e){var o=Math.sin(e)*t,a=-Math.cos(e)*t,u=o-n,l=a-r;return n=o,r=a,[u,l]}))}return d.hexagon=function(t){return"m"+g(null==t?o:+t).join("l")+"z"},d.centers=function(){for(var t=[],e=Math.round(i/u),n=Math.round(l/a),r=e*u;r<c+o;r+=u,++e)for(var f=n*a+(1&e)*a/2;f<s+a/2;f+=a)t.push([f,r]);return t},d.mesh=function(){var t=g(o).slice(0,4).join("l");return d.centers().map((function(e){return"M"+e+"m"+t})).join("")},d.x=function(t){return arguments.length?(f=t,d):f},d.y=function(t){return arguments.length?(h=t,d):h},d.radius=function(e){return arguments.length?(a=2*(o=+e)*Math.sin(t),u=1.5*o,d):o},d.size=function(t){return arguments.length?(l=i=0,s=+t[0],c=+t[1],d):[s-l,c-i]},d.extent=function(t){return arguments.length?(l=+t[0][0],i=+t[0][1],s=+t[1][0],c=+t[1][1],d):[[l,i],[s,c]]},d.radius(1)}let a=document.querySelector("input#error");function u(){let t=a.value;const e=d3.json("https://raw.githubusercontent.com/addu390/population-cartogram/master/data/population/2018/geo.json");Promise.all([e]).then((e=>{let[n]=e;!function(t,e){const n={top:30,right:30,bottom:30,left:30},r=1200-n.left-n.right,a=650-n.top-n.bottom;let u=1.5*e,l=r/u,i=d3.geoNaturalEarth1().fitExtent([[0,.05*a],[r,.95*a]],t),s=Math.ceil(a/u),c=d3.range(s*l).map((function(t,e){return{x:Math.floor(e%l)*u,y:Math.floor(e/l)*u,datapoint:0}})),f=[];for(let e=0;e<t.features.length;e++)if(f[e]=[],"MultiPolygon"==t.features[e].geometry.type)for(let n=0;n<t.features[e].geometry.coordinates.length;n++)f[e]=f[e].concat(t.features[e].geometry.coordinates[n][0]);else"Polygon"==t.features[e].geometry.type&&(f[e]=f[e].concat(t.features[e].geometry.coordinates[0]));d3.select("#container").selectAll("*").remove();const h=d3.select("#container").append("svg").attr("width",r+n.left+n.top).attr("height",a+n.top+n.bottom).append("g").attr("transform",`translate(${n.left} ${n.top})`);for(let t=0;t<f.length;t++){let n=f[t].map((t=>i(t))),r=c.reduce((function(t,e){return d3.polygonContains(n,[e.x,e.y])&&t.push(e),t}),[]),a=o().radius(e).x((function(t){return t.x})).y((function(t){return t.y})),u=a(r);h.append("g").attr("id","hexes").selectAll(".hex").data(u).enter().append("path").attr("class","hex").attr("transform",(function(t){return"translate("+t.x+", "+t.y+")"})).attr("d",a.hexagon()).style("fill","#"+Math.floor(16777215*Math.random()).toString(16)).style("stroke","#000").style("stroke-width",1)}}(n,t)}))}a.addEventListener("click",(()=>{console.log(a.value),u()})),u();
//# sourceMappingURL=index.53ac8ba6.js.map
