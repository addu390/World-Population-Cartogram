var t=Math.PI/3,n=[0,t,2*t,3*t,4*t,5*t];function e(t){return t[0]}function r(t){return t[1]}function o(){var o,a,u,l=0,s=0,i=1,c=1,f=e,h=r;function g(t){var n,e={},r=[],o=t.length;for(n=0;n<o;++n)if(!isNaN(s=+f.call(null,l=t[n],n,t))&&!isNaN(i=+h.call(null,l,n,t))){var l,s,i,c=Math.round(i/=u),g=Math.round(s=s/a-(1&c)/2),d=i-c;if(3*Math.abs(d)>1){var p=s-g,y=g+(s<g?-1:1)/2,m=c+(i<c?-1:1),M=s-y,x=i-m;p*p+d*d>M*M+x*x&&(g=y+(1&c?1:-1)/2,c=m)}var v=g+"-"+c,j=e[v];j?j.push(l):(r.push(j=e[v]=[l]),j.x=(g+(1&c)/2)*a,j.y=c*u)}return r}function d(t){var e=0,r=0;return n.map((function(n){var o=Math.sin(n)*t,a=-Math.cos(n)*t,u=o-e,l=a-r;return e=o,r=a,[u,l]}))}return g.hexagon=function(t){return"m"+d(null==t?o:+t).join("l")+"z"},g.centers=function(){for(var t=[],n=Math.round(s/u),e=Math.round(l/a),r=n*u;r<c+o;r+=u,++n)for(var f=e*a+(1&n)*a/2;f<i+a/2;f+=a)t.push([f,r]);return t},g.mesh=function(){var t=d(o).slice(0,4).join("l");return g.centers().map((function(n){return"M"+n+"m"+t})).join("")},g.x=function(t){return arguments.length?(f=t,g):f},g.y=function(t){return arguments.length?(h=t,g):h},g.radius=function(n){return arguments.length?(a=2*(o=+n)*Math.sin(t),u=1.5*o,g):o},g.size=function(t){return arguments.length?(l=s=0,i=+t[0],c=+t[1],g):[i-l,c-s]},g.extent=function(t){return arguments.length?(l=+t[0][0],s=+t[0][1],i=+t[1][0],c=+t[1][1],g):[[l,s],[i,c]]},g.radius(1)}const a=d3.json("https://raw.githubusercontent.com/addu390/population-cartogram/master/data/population/2018/geo.json");Promise.all([a]).then((t=>{let[n]=t;!function(t){const n=30,e=30,r=30,a=2400-r-30,u=1200-n-e;let l=4.5,s=a/l,i=d3.geoNaturalEarth1().fitExtent([[0,.05*u],[a,.95*u]],t),c=Math.ceil(u/l),f=d3.range(c*s).map((function(t,n){return{x:Math.floor(n%s)*l,y:Math.floor(n/s)*l,datapoint:0}}));console.log(f);let h=[];for(let n=0;n<t.features.length;n++)if(h[n]=[],"MultiPolygon"==t.features[n].geometry.type)for(let e=0;e<t.features[n].geometry.coordinates.length;e++)h[n]=h[n].concat(t.features[n].geometry.coordinates[e][0]);else"Polygon"==t.features[n].geometry.type&&(h[n]=h[n].concat(t.features[n].geometry.coordinates[0]));const g=d3.select("#container").append("svg").attr("width",a+r+n).attr("height",u+n+e).append("g").attr("transform",`translate(${r} ${n})`);for(let t=0;t<h.length;t++){let n=h[t].map((t=>i(t)));console.log(n);let e=f.reduce((function(t,e){return d3.polygonContains(n,[e.x,e.y])&&t.push(e),t}),[]);console.log(e);let r=o().radius(3).x((function(t){return t.x})).y((function(t){return t.y})),a=r(e);g.append("g").attr("id","hexes").selectAll(".hex").data(a).enter().append("path").attr("class","hex").attr("transform",(function(t){return"translate("+t.x+", "+t.y+")"})).attr("d",r.hexagon()).style("fill","none").style("stroke","#"+Math.floor(16777215*Math.random()).toString(16)).style("stroke-width",1)}}(n)}));
//# sourceMappingURL=index.a58ef37c.js.map
