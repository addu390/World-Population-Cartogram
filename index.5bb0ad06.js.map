{"mappings":"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","sources":["node_modules/d3-hexbin/src/hexbin.js","app.js"],"sourcesContent":["var thirdPi = Math.PI / 3,\n    angles = [0, thirdPi, 2 * thirdPi, 3 * thirdPi, 4 * thirdPi, 5 * thirdPi];\n\nfunction pointX(d) {\n  return d[0];\n}\n\nfunction pointY(d) {\n  return d[1];\n}\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 1,\n      y1 = 1,\n      x = pointX,\n      y = pointY,\n      r,\n      dx,\n      dy;\n\n  function hexbin(points) {\n    var binsById = {}, bins = [], i, n = points.length;\n\n    for (i = 0; i < n; ++i) {\n      if (isNaN(px = +x.call(null, point = points[i], i, points))\n          || isNaN(py = +y.call(null, point, i, points))) continue;\n\n      var point,\n          px,\n          py,\n          pj = Math.round(py = py / dy),\n          pi = Math.round(px = px / dx - (pj & 1) / 2),\n          py1 = py - pj;\n\n      if (Math.abs(py1) * 3 > 1) {\n        var px1 = px - pi,\n            pi2 = pi + (px < pi ? -1 : 1) / 2,\n            pj2 = pj + (py < pj ? -1 : 1),\n            px2 = px - pi2,\n            py2 = py - pj2;\n        if (px1 * px1 + py1 * py1 > px2 * px2 + py2 * py2) pi = pi2 + (pj & 1 ? 1 : -1) / 2, pj = pj2;\n      }\n\n      var id = pi + \"-\" + pj, bin = binsById[id];\n      if (bin) bin.push(point);\n      else {\n        bins.push(bin = binsById[id] = [point]);\n        bin.x = (pi + (pj & 1) / 2) * dx;\n        bin.y = pj * dy;\n      }\n    }\n\n    return bins;\n  }\n\n  function hexagon(radius) {\n    var x0 = 0, y0 = 0;\n    return angles.map(function(angle) {\n      var x1 = Math.sin(angle) * radius,\n          y1 = -Math.cos(angle) * radius,\n          dx = x1 - x0,\n          dy = y1 - y0;\n      x0 = x1, y0 = y1;\n      return [dx, dy];\n    });\n  }\n\n  hexbin.hexagon = function(radius) {\n    return \"m\" + hexagon(radius == null ? r : +radius).join(\"l\") + \"z\";\n  };\n\n  hexbin.centers = function() {\n    var centers = [],\n        j = Math.round(y0 / dy),\n        i = Math.round(x0 / dx);\n    for (var y = j * dy; y < y1 + r; y += dy, ++j) {\n      for (var x = i * dx + (j & 1) * dx / 2; x < x1 + dx / 2; x += dx) {\n        centers.push([x, y]);\n      }\n    }\n    return centers;\n  };\n\n  hexbin.mesh = function() {\n    var fragment = hexagon(r).slice(0, 4).join(\"l\");\n    return hexbin.centers().map(function(p) { return \"M\" + p + \"m\" + fragment; }).join(\"\");\n  };\n\n  hexbin.x = function(_) {\n    return arguments.length ? (x = _, hexbin) : x;\n  };\n\n  hexbin.y = function(_) {\n    return arguments.length ? (y = _, hexbin) : y;\n  };\n\n  hexbin.radius = function(_) {\n    return arguments.length ? (r = +_, dx = r * 2 * Math.sin(thirdPi), dy = r * 1.5, hexbin) : r;\n  };\n\n  hexbin.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], hexbin) : [x1 - x0, y1 - y0];\n  };\n\n  hexbin.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], hexbin) : [[x0, y0], [x1, y1]];\n  };\n\n  return hexbin.radius(1);\n}\n","import { hexbin } from 'd3-hexbin'\n\ndocument.querySelector('#loader').classList.add(\"hide\");\nlet colors = ['#1abc9c', '#2ecc71', '#3498db', '#9b59b6', '#34495e', '#16a085', '#27ae60', '#2980b9', '#8e44ad', '#2c3e50',\n  '#f1c40f', '#e67e22', '#e74c3c', '#ecf0f1', '#95a5a6', '#f39c12', '#d35400', '#c0392b', '#bdc3c7', '#7f8c8d']\n\nlet radiusInput = document.querySelector('input#radius');\n\nradiusInput.addEventListener('click', () => {\n  document.querySelector('#loader').classList.remove(\"hide\");\n  console.log(radiusInput.value)\n  start()\n});\n\nconst margin = { top: 25, right: 10, bottom: 35, left: 10 },\n  width = 1250 - margin.left - margin.right,\n  height = 750 - margin.top - margin.bottom;\n\nfunction start() {\n  let hexRadius = radiusInput.value\n  const geoData = d3.json(\n    'https://raw.githubusercontent.com/addu390/population-cartogram/master/data/population/2018/geo.json'\n  );\n  Promise.all([geoData]).then(res => {\n    let [geoData] = res;\n\n    plot_map(geoData, hexRadius);\n    document.querySelector('#loader').classList.add(\"hide\");\n  });\n}\n\nfunction plot_map(geo, hexRadius) {\n\n  let hexDistance = hexRadius * 1.5\n  let cols = width / hexDistance\n  let new_projection = d3.geoNaturalEarth1().fitExtent([[0, height * 0.05], [width, height * 0.95]], geo)\n  let rows = Math.ceil(height / hexDistance);\n  let pointGrid = d3.range(rows * cols).map(function (el, i) {\n    return {\n      x: Math.floor(i % cols) * hexDistance,\n      y: Math.floor(i / cols) * hexDistance,\n      datapoint: 0\n    };\n  });\n\n  let features = []\n  for (let i = 0; i < geo.features.length; i++) {\n    features[i] = []\n    if (geo.features[i].geometry.type == \"MultiPolygon\") {\n      for (let j = 0; j < geo.features[i].geometry.coordinates.length; j++) {\n        features[i] = features[i].concat(geo.features[i].geometry.coordinates[j][0])\n      }\n    }\n    else if (geo.features[i].geometry.type == \"Polygon\") {\n      features[i] = features[i].concat(geo.features[i].geometry.coordinates[0])\n    }\n  }\n\n  d3.select('#container').selectAll(\"*\").remove()\n\n  let new_hexbin = hexbin()\n    .radius(hexRadius)\n    .x(function (d) { return d.x; })\n    .y(function (d) { return d.y; })\n\n  const svg = d3.select('#container')\n    .append('svg')\n    .attr('width', width + margin.left + margin.top)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left} ${margin.top})`);\n\n  svg.append('g').attr('id', 'hexes')\n    .selectAll('.hex')\n    .data(new_hexbin(pointGrid))\n    .enter().append('path')\n    .attr('class', 'hex')\n    .attr('transform', function (d) { return 'translate(' + d.x + ', ' + d.y + ')'; })\n    .attr('d', new_hexbin.hexagon())\n    .style('fill', '#fff')\n    .style('stroke', '#e0e0e0')\n    .style('stroke-width', 0.5)\n    .on(\"click\", mclickBase);\n\n  for (let i = 0; i < features.length; i++) {\n    let polygonPoints = features[i].map(el => new_projection(el));\n    let usPoints = pointGrid.reduce(function (arr, el) {\n      if (d3.polygonContains(polygonPoints, [el.x, el.y])) arr.push(el);\n      return arr;\n    }, [])\n\n    let hexPoints = new_hexbin(usPoints)\n\n    svg.append('g').attr('id', 'hexes')\n      .selectAll('.hex')\n      .data(hexPoints)\n      .enter().append('path')\n      .attr('class', 'hex')\n      .attr('transform', function (d) { return 'translate(' + d.x + ', ' + d.y + ')'; })\n      .attr(\"x\", function (d) { return d.x; })\n      .attr(\"y\", function (d) { return d.y; })\n      .attr('d', new_hexbin.hexagon())\n      .style('fill', colors[i % 19])\n      .style('stroke', '#000')\n      .style('stroke-width', 0.5)\n      .on(\"click\", mclick)\n      .on(\"mouseover\", mover)\n      .on(\"mouseout\", mout)\n      .call(d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended));\n  }\n}\n\nfunction mover(d) {\n  var el = d3.select(this)\n    .transition()\n    .duration(10)\n    .style(\"fill-opacity\", 0.9);\n}\n\n\nfunction mclickBase(d) {\n  let selectElement = document.querySelector('#label-option');\n  if (selectElement.value == \"Remove\") {\n    d3.select(this)\n      .style('fill', '#fff')\n      .style('stroke', '#e0e0e0')\n      .lower();\n  } else {\n    let colorElement = document.querySelector('#color-option');\n    d3.select(this)\n      .style('stroke-width', 0.5)\n      .style('fill', colorElement.value)\n      .style('stroke', '#000')\n      .on(\"mouseover\", mover)\n      .on(\"mouseout\", mout)\n      .call(d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended))\n      .raise();\n  }\n}\n\nfunction mclick(d) {\n  let selectElement = document.querySelector('#label-option');\n  if (selectElement.value == \"Remove\") {\n    console.log(\"here\")\n    d3.select(this)\n      .remove()\n  } else {\n    let colorElement = document.querySelector('#color-option');\n    d3.select(this)\n      .style('stroke-width', 0.5)\n      .style('fill', colorElement.value)\n      .style('stroke', '#000')\n      .on(\"mouseover\", mover)\n      .on(\"mouseout\", mout)\n      .call(d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended))\n      .raise();\n  }\n}\n\nfunction mout(d) {\n  d3.select(this)\n    .transition()\n    .duration(10)\n    .style(\"fill-opacity\", 1);\n}\n\nfunction dragstarted(event, d) {\n  d.fixed = false\n  d3.select(this).raise()\n    .style('stroke-width', 1)\n    .style('stroke', '#000');\n}\n\nfunction dragged(event, d) {\n  let hexRadius = radiusInput.value\n  var x = event.x\n  var y = event.y\n  var grids = round(x, y, hexRadius);\n  d3.select(this)\n    .attr(\"x\", d.x = grids[0])\n    .attr(\"y\", d.y = grids[1])\n    .attr('transform', function (d) { return 'translate(' + d.x + ', ' + d.y + ')'; })\n}\n\nfunction dragended(event, d) {\n  d.fixed = true\n  d3.select(this)\n    .style('stroke-width', 0.5)\n    .style('stroke', '#000');\n}\n\nfunction round(x, y, n) {\n  var gridx\n  var gridy\n  var factor = Math.sqrt(3) / 2\n  var d = n * 2\n  var sx = d * factor\n  var sy = n * 3\n  if (y % sy < n) {\n    gridy = y - (y % sy)\n    gridx = x - (x % sx)\n  } else {\n    gridy = y + (d - (n * factor) / 2) - (y % sy);\n    gridx = x + (n * factor) - (x % sx);\n  }\n  return [gridx, gridy]\n}\n\nstart()"],"names":["$28bd4c13f05a9ff5$var$thirdPi","Math","PI","$28bd4c13f05a9ff5$var$angles","$28bd4c13f05a9ff5$var$pointX","d","$28bd4c13f05a9ff5$var$pointY","document","querySelector","classList","add","$6b17f08f738443dc$var$colors","$6b17f08f738443dc$var$radiusInput","addEventListener","remove","console","log","value","$6b17f08f738443dc$var$start","$6b17f08f738443dc$var$margin","$6b17f08f738443dc$var$width","$6b17f08f738443dc$var$height","hexRadius","geoData1","d3","json","Promise","all","then","res","geoData","geo","hexDistance","cols","new_projection","geoNaturalEarth1","fitExtent","rows","ceil","pointGrid","range","map","el","i","x","floor","y","datapoint","features","i2","length","geometry","type","j","coordinates","concat","select","selectAll","new_hexbin","r","dx1","dy1","x01","y01","x11","y11","x2","y2","hexbin","points","binsById","bins","n","isNaN","px","call","point","py","pj","round","pi","py1","abs","px1","pi2","pj2","px2","py2","id","bin","push","hexagon","radius","x0","y0","angle","x1","sin","y1","cos","dx","dy","join","centers","mesh","fragment","slice","p","_","arguments","size","extent","$28bd4c13f05a9ff5$export$2e2bcd8739ae039","svg","append","attr","data","enter","style","on","$6b17f08f738443dc$var$mclickBase","i1","polygonPoints","hexPoints","reduce","arr","polygonContains","$6b17f08f738443dc$var$mclick","$6b17f08f738443dc$var$mover","$6b17f08f738443dc$var$mout","drag","$6b17f08f738443dc$var$dragstarted","$6b17f08f738443dc$var$dragged","$6b17f08f738443dc$var$dragended","$6b17f08f738443dc$var$plot_map","this","transition","duration","lower","colorElement","raise","event","fixed","d1","grids","gridx","gridy","factor","sqrt","sx","sy","$6b17f08f738443dc$var$round"],"version":3,"file":"index.5bb0ad06.js.map"}